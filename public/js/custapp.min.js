function dataColumnIsVisibleOnPageLoad(dataTable){var Table=$(dataTable).DataTable(),links;$(dataTable+"-links a.toggle-vis").each((function(){var colNum=$(this).attr("data-column"),column;!1===Table.column(colNum).visible()&&$(this).addClass("text-primary")}))}function showHideDataTableColumn(dataTable){$(dataTable+"-links a.toggle-vis").on("click",(function(e){e.preventDefault();var table=$(dataTable).DataTable(),colNum=$(this).attr("data-column"),column=table.column(colNum);column.visible(!column.visible()),!0===column.visible()?(console.log("visible"),$(this).removeClass("text-primary")):(console.log(" not visible"),$(this).addClass("text-primary"))}))}function addRow(addBtn,modalId,formId){$(addBtn).on("click",(function(){var rowCount=$("#row-count").val();if(""==rowCount)$(modalId).find(".error_text").text("Field Requried");else if(rowCount<1)$(modalId).find(".error_text").text("invalid input");else if(rowCount>5)$(modalId).find(".error_text").text("Maximum 5 fields are allowed");else{var div=$("#newRow > div").length,NofF;if(parseInt(rowCount)+div>5)$(modalId).find(".error_text").text("Maximum 5 fields are allowed");else{$(formId).removeClass("d-none"),$(modalId).find(".error_text").text("");for(var i=0;i<rowCount;i++){var html="";html+='<div id="inputFormRow" class="">',html+='<div class="input-group">',html+='<input type="text" name="title[]" class="form-control m-input" placeholder="Enter title" autocomplete="off">',html+='<div class="input-group-append">',html+='<button id="removeRow" type="button" class="btn btn-theme-danger"><i class="fas fa-trash-alt"></i></button>',html+="</div>",html+="</div>",html+='<span class="text-danger error-text px-1 pb-2 title title_'+i+'"></span>',html+="</div>",$("#newRow").append(html)}}}}))}function removeRow(removeBtn,modalId,formId){$(modalId).on("click",removeBtn,(function(){var data;$(this).closest("#inputFormRow").remove(),0==$(formId).find("#newRow #inputFormRow").length&&$(formId).addClass("d-none")}))}function add(dataTable,formId,modalId){$(formId).on("submit",(function(e){e.preventDefault(e);var form=this,sendURL=$(form).attr("action"),method=$(form).attr("method");$.ajax({url:sendURL,method:method,data:new FormData(form),dataType:"json",processData:!1,contentType:!1,beforeSend:function(){$(form).find("span.error-text").text("")},success:function(data){0==data.code?$.each(data.error,(function(prefix,val){"title"==prefix?$(formId).find("."+prefix).text(val[0]):/title\.\d/g.test(prefix)?$(formId).find("."+prefix.replace(".","_")).text(val[0].replace(/title\.\d/g,"title")):$(form).find("span."+prefix+"_error").text(val[0])})):(toastr.success(data.msg),$(form)[0].reset(),$(modalId).modal("hide"),$(dataTable).DataTable().ajax.reload())}})}))}function update(dataTable,modalId,modalBtnId,formId,dataSourceUrl){$(dataTable).on("click",modalBtnId,(function(){var id=$(this).data("id"),url=dataSourceUrl+"/"+id;$.post(url,(function(data){console.log(data),$(modalId).find('input[name="title"]').val(data.details.title),$(modalId).find('input[name="metatitle"]').val(data.details.metatitle)}),"json"),$(formId).on("submit",(function(e){e.preventDefault();var form=this,sendURL=$(form).attr("action")+"/"+id,method=$(form).attr("method");$.ajax({url:sendURL,method:method,data:new FormData(form),processData:!1,dataType:"json",contentType:!1,beforeSend:function(){$(form).find("span.error-text").text("")},success:function(data){0==data.code?$.each(data.error,(function(prefix,val){$(form).find("span."+prefix+"_error").text(val[0])})):($(form)[0].reset(),$(modalId).modal("hide"),$(dataTable).DataTable().ajax.reload(),toastr.success(data.msg))}})}))}))}function del(dataTable,modalId,modalBtnId,formId,dataSourceUrl){$(dataTable).on("click",modalBtnId,(function(){var id=$(this).data("id");$(formId).on("submit",(function(e){e.preventDefault();var form=this,sendURL=$(form).attr("action")+"/"+id,method=$(form).attr("method");$.ajax({url:sendURL,method:method,data:new FormData(form),processData:!1,dataType:"json",contentType:!1,success:function(data){0==data.code?$.each(data.error,(function(prefix,val){$(form).find("span."+prefix+"_error").text(val[0])})):($(form)[0].reset(),$(modalId).modal("hide"),$(dataTable).DataTable().ajax.reload(),toastr.success(data.msg))}})}))}))}function view(dataTable,modalId,modalBtnId){$(dataTable).on("click",modalBtnId,(function(){var id,url="post/"+$(this).data("id")+"/info";$.get(url,(function(data){console.log(data),$(modalId+" #uname").html("<span>u/ <code>"+data.PostDetails.user.uname+"</code></span>"),$(modalId+" #publishedDate").html("<pre>"+data.PostDetails.created_at+"</pre>"),$(modalId+" #title").html(data.PostDetails.title),$(modalId+" #desc").html(data.PostDetails.desc);var tag=[];$.each(data.PostDetails.tags,(function(k,v){tag.push(v.title)})),$.map(tag,(function(index){$('<span class="badge badge-warning ml-2 p-2" style="font-size:16px;cursor:pointer"> <i class="fas fa-tag"></i> '+index+"<span>").appendTo(modalId+" #tags")}))}),"json")}))}function toggleDeleteAll(checkedSingle,chkDelAllBtn){$('input[name="'+checkedSingle+'"]:checked').length>0?$(chkDelAllBtn).text("Delete ("+$('input[name="'+checkedSingle+'"]:checked').length+")").removeClass("d-none"):$(chkDelAllBtn).addClass("d-none")}function checkedSingle(checkedSingle,checkedAll,chkDelAllBtn){$(document).on("click",'input[name="'+checkedSingle+'"]',(function(e){$('input[name="'+checkedSingle+'"]').length==$('input[name="'+checkedSingle+'"]:checked').length?$('input[name="'+checkedAll+'"]').prop("checked",!0):$('input[name="'+checkedAll+'"]').prop("checked",!1),toggleDeleteAll(checkedSingle,chkDelAllBtn)}))}function checkedAll(checkedAll,checkedSingle,chkDelAllBtn){$('input[name="'+checkedAll+'"]').on("click",(function(e){this.checked?$('input[name="'+checkedSingle+'"]').each((function(){this.checked=!0})):$('input[name="'+checkedSingle+'"]').each((function(){this.checked=!1})),toggleDeleteAll(checkedSingle,chkDelAllBtn)}))}function UncheckAll(){for(var w=document.getElementsByTagName("input"),i=0;i<w.length;i++)"checkbox"==w[i].type&&(w[i].checked=!1)}function delAll(dataTable,modalId,modalBtnId,formId){var checkedField=[];$(document).on("click",modalBtnId,(function(e){var k=$('input[name="checkedSingle"]:checked').each((function(){checkedField.push($(this).data("id"))}));$(modalId).find("#showDelId").text(k.length)})),$(formId).on("submit",(function(e){e.preventDefault();var form=this,url=$(form).attr("action");$.post(url,{id:checkedField},(function(data){0==data.code?$.each(data.error,(function(prefix,val){$(form).find("span."+prefix+"_error").text(val[0])})):($(formId)[0].reset(),$(modalBtnId).addClass("d-none"),UncheckAll(),$(modalId).modal("hide"),$(dataTable).DataTable().ajax.reload(),toastr.success(data.msg))}),"json")}))}function resetMoalForm(modalId,formId){$(modalId).on("hidden.bs.modal",(function(){$(this).find(formId).trigger("reset")}))}$("#themeChange").on("click",(function(){$("#themeChange").is(":checked")||alert("not")}));